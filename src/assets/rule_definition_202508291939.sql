INSERT INTO rule_definition (creation_user,creation_date,valid_from,valid_to,is_current,versioning_comment,user_comment,reference,"type",category,description,"content",base_reference) VALUES 
('TIDE','2025-06-20 15:34:36.606','2025-06-20 15:34:36.606',NULL,true,'initial version','global rule creation','GLOBAL-INPUT-V0001','INPUT','INPUT','sets input','{}','GLOBAL-INPUT')
,('TIDE','2025-06-20 16:33:03.914','2025-06-20 16:33:03.914',NULL,true,'initial version','product and cost','BAP-SS-MON-PRICING-V0001','ENRICH','PRICING','sets product and cost','{"enrich": [{"key": "usage.product.id", "value": "BAP-SS-MON"}, {"key": "usage.product.group", "value": "Application Monitoring"}, {"key": "usage.product.domain", "value": "Infrastructure Services"}, {"key": "usage.product.navision", "value": 100}, {"key": "usage.cost.totalCost", "value": {"op": "multiply", "args": [{"var": "usage.content.usageData.quantity"}, {"var": "usage.product.navision"}]}}]}','BAP-SS-MON-PRICING')
,('TIDE','2025-06-20 16:47:13.869','2025-06-20 16:47:13.869',NULL,true,'initial version','global rule creation','GLOBAL-INVOICE-V0001','INVOICE','INVOICELINE','inserts invoiceline (default)','{"output": {"default": "param.rules.invoiceRuleDefaultMapping"}}','GLOBAL-INVOICE')
,('TIDE','2025-06-20 16:44:44.956','2025-06-20 16:44:44.956',NULL,true,'initial version','formatting descriptions','BAP-SS-MON-FORMAT-V0001','ENRICH','FORMAT','sets formatting','{"enrich": [{"key": "usage.format.description", "value": "${usage.content.usageData.monitoringTestSource}: ${usage.content.usageData.monitoringTestName}"}, {"key": "usage.format.technicalDescription", "value": "${usage.content.costComponent.id}  ${usage.content.usageData.monitoringTestName}"}]}','BAP-SS-MON-FORMAT')
,('TIDE','2025-06-20 16:21:23.180','2025-06-20 16:21:23.180',NULL,true,'initial version','global rule creation','GLOBAL-ALLOCATION-V0001','ENRICH','ALLOCATION','allocation data','{"enrich": [{"key": "usage.costAllocationDetails", "value": {"op": "octopusLookup", "args": [{"onUpdate": {"condition": {"anomalies": "", "costComponentStatus": "${usage.content.costComponent.status}", "costComponentFunction": "${usage.content.costComponent.function}", "costComponentEnvironment": "${usage.content.costComponent.environment}"}, "navisionValidity": false, "versioningComment": "costComponent updated by system with usage reference: ${usage.reference}"}, "onCreation": {"costComponentName": "${usage.content.costComponent.name}", "costComponentType": "${usage.content.costComponent.type}", "versioningComment": "costComponent created by system with usage reference (first seen): ${usage.reference}", "billingCodeConsumer": "${usage.content.costComponent.billingCode}", "costComponentStatus": "${usage.content.costComponent.status}", "costComponentFunction": "${usage.content.costComponent.function}", "costComponentEnvironment": "${usage.content.costComponent.environment}"}, "costComponentReference": "${usage.content.costComponent.type}-${usage.costComponentReference}"}]}}]}','GLOBAL-ALLOCATION')
,('TIDE','2025-06-20 16:09:03.894','2025-06-20 16:09:03.894',NULL,true,'initial version','filters out only production monitoring','BAP-SS-MON-FILTER-V0001','FILTER','FILTER','filters out only production monitoring','{"filter": {"op": "EQ", "args": [{"var": "usage.content.costComponent.environment"}, {"value": "PROD"}]}}','BAP-SS-MON-FILTER')
,('TIDE','2025-06-20 16:11:46.486','2025-06-20 16:11:46.486',NULL,true,'initial version','dictionary creation','BAP-SS-MON-DICTIONARY-V0001','ENRICH','DICTIONARY','adds dictionary info','{"enrich": [{"key": "usage.dataDictionary.providerId", "value": "568"}, {"key": "usage.dataDictionary.providerBillingCode", "value": "0036805"}, {"key": "usage.dataDictionary.periodicity", "value": "daily"}]}','BAP-SS-MON-DICTIONARY')
;